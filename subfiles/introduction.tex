\documentclass[../document.tex]{subfiles}

\begin{document}
    \subsection{Глоссарий}
    \par A/B (A/B/n) тестирование - рандомизированный эксперимент, который проводится путем разделения пользователей на 2 (или более) группы, представления им различных вариантов продукта и сравнением результатов с помощью заранее выбранной метрики.
    \subsection{Описание предметной области}
    \par drom.ru \textemdash\ автомобильный портал, который является "доской объявлений" о продаже автомобилей. В процессе разработки и внедрения новых функций либо переработки старых возникает вопрос: как проверить, нравится ли новый вариант пользователям. Для этого проводится A/B тестирование.
    \par Подобные эксперименты могут быть проведены (и на данный момент проводятся) вручную, однако это отнимает рабочее время аналитика и представляет собой достаточно большое количество ручной работы. Автоматизация A/B тестов позволит унифицировать процесс принятия решений, проводить их в большом количестве, с минимальным участием аналитика, а использование различных методик, таких, как последовательное A/B тестирование, позволит проводить их быстрее обычного.
    \subsection{Неформальная постановка задачи}
    \par Разрабатываемая система должна отвечать следующим требованиям:
    \begin{enumerate}
        \item возможность проводить A/B тесты как в мобильных приложениях, так и на сайте;
        \item возможность самостоятельной поддержки (доработки) системы;
        \item возможность анализа сырых данных;
        \item поддержка метрик, отличных от конверсии;
        \item хостинг системы на своих серверах;
        \item отсутствие возможных проблем с лицензией на ПО.
    \end{enumerate}
    \subsection{Анализ существующих решений}
    \par В результате исследования рынка подобных систем было обнаружено большое количество подобных систем, большинство из которых предоставляют услуги в формате SaaS (software as a service).
    \par В данной работе будут рассмотрены самые популярные программные продукты.
    \subsubsection{Google Optimize/Firebase A/B Testing}
    \par Системы\cite{noauthor_optimize_nodate, noauthor_firebase_nodate} от Google, где первая используется для веб-сайтов, а вторая \textemdash\ для мобильных приложений.
    \begin{enumerate}
        \item[+] интегрировано с аналитикой;
        \item[+] поддержка различных метрик;
        \item[+] доступ к сырым данным через BigQuery;
        \item[\textminus] разные платформы для приложений и веба;
        \item[\textminus] аналитика не позволяет идентифицировать пользователя;
        \item[\textminus] невозможность хостинга на своих серверах;
        \item[\textminus] ограничение на количество событий в месяц в аналитике.      
    \end{enumerate}
    \subsubsection{Optimizely}
    \par Одна\cite{noauthor_optimizely_nodate} из ведущих коммерческих систем.
    \begin{enumerate}
        \item[+] единая платформа для приложений и веба;
        \item[+] поддержка различных метрик;
        \item[\textpm] доступ к сырым данным через экспорт;
        \item[\textminus] невозможность хостинга на своих серверах.
    \end{enumerate}
    \subsubsection{VWO (Visual Website Optimizer)}
    \par Ещё одна\cite{noauthor_vwo_nodate} из ведущих систем.
    \begin{enumerate}
        \item[+] встроенная аналитика;
        \item[+] единая платформа для приложений и веба;
        \item[+]  поддержка различных метрик;
        \item[\textpm]  доступ к сырым данным через экспорт;
        \item[\textminus] невозможность хостинга на своих серверах.
    \end{enumerate}
    \subsubsection{Evergage}
    \par Платформа\cite{noauthor_evergage_nodate} аналитики с возможностью проводить A/B тесты.
    \begin{enumerate}
        \item[+] система аналитики (со встроенным функционалом A/B тестирования);
        \item[+] единая платформа для приложений и веба;
        \item[+] есть решение для работы с сырыми данными;
        \item[\textminus]  невозможность хостинга на своих серверах.
    \end{enumerate}
    \subsubsection{Taplytics}
    \par Система\cite{noauthor_taplytics_nodate} аналитики с возможностью on-premise хостинга.
    \begin{enumerate}
        \item[+] система аналитики (со встроенным функционалом A/B тестирования);
        \item[+] единая платформа для приложений и веба;
        \item[+]  поддержка различных метрик;
        \item[+] on-premise вариант;
        \item[+] доступ к сырым данным через BigQuery (неизвестно, как это выполнено в on-premise варианте).
    \end{enumerate}
    \subsubsection{Countly}
    \par On-premise система\cite{noauthor_countly_nodate} аналитики с открытым исходным кодом.
    \begin{enumerate}
        \item[+] система аналитики (со встроенным функционалом A/B тестирования);
        \item[+] единая платформа для приложений и веба; 
        \item[+] on-premise;
        \item[+] открытый исходный код, плагин для A/B тестов \textemdash\ платный;
        \item[\textminus] сырые данные хранятся в MongoDB.
    \end{enumerate}
    \subsubsection{Matomo}
    \par Ещё одна система\cite{noauthor_matomo_nodate} аналитики с открытым кодом.
    \begin{enumerate}
        \item[+] система аналитики (со встроенным функционалом A/B тестирования);
        \item[+] единая платформа для приложений и веба;
        \item[+] поддержка различных метрик; 
        \item[+] on-premise;
        \item[+] открытый исходный код, плагин для A/B тестов \textemdash\ платный; 
        \item[\textminus] сырые данные хранятся в MySQL. 
    \end{enumerate}
    \subsubsection{Решения с открытым исходным кодом}
    \par \textbf{Planout}\cite{noauthor_planout_nodate} \textemdash\ решение от Facebook. Поддерживает разделение пользователей по когортам по достаточно сложным правилам, но не содержит функционала анализа результатов.
    \par \textbf{Sixpack}\cite{noauthor_sixpack_nodate} \textemdash\ решение от SeatGeek. Делит пользователей на когорты и подсчитывает конверсию для вариантов.
    \subsubsection{Выводы из анализа}
    \par Не смотря на существование систем, которые отвечают большинству требований, систем, отвечающих всем из них, нет. Большинство систем являются облачными сервисами, что непреемлемо, а остальные либо не имеют нужного функционала, либо не могут быть использованы по различным причинам. Полноценных решений с открытым исходным кодом не обнаружено.
    \subsection{Нюансы A/B тестирования}
    \par В задаче A/B тестирования можно выделить несколько подзадач:
    \subsubsection{Распределение пользователей по когортам}
    \par Для проведения теста необходимо распределить пользователей по когортам равномерно, не внося в это никаких закономерностей.
    \begin{enumerate}
        \item Можно воспользоваться, например, последней цифрой идентификатора пользователя, если они присваиваются каждому пользователю случайно. При этом необходимо учитывать то, что, при проведении нескольких тестов одновременно или подряд, может возникнуть корреляция между их результатами, так как пользователи обладают памятью.
        \item Каждому пользователю можно присвоить когорту случайно, тогда эту информацию необходимо сохранить для каждого эксперимента и пользователя в базе данных.
        \item Можно расчитать хэш из идентификатора пользователя и идентификатора эксперимента, при правильно выбранной хэш-функции может обеспечить равномерное распределение пользователей по группам и не требует хранения данных в базе. Подобный подход использует, например, Planout\cite{noauthor_planout_nodate}.
    \end{enumerate}
    \subsubsection{Выбор метрики}
    \par Как правило, литература\cite{kohavi_online_2013, sammut_online_2017} рекомендует определить для всех тестов одну ключевую метрику. Однако, это не всегда возможно, и иногда возникает необходимость использовать другую метрику, или даже несколько метрик, что, хотя и не верно со статистической точки зрения, с точки зрения бизнеса вполне обоснованно.
    \subsubsection{Выбор статистического критерия}
    \par Выбор статистического критерия, как правило, зависит от выбора метрики. Разрабатываемая система, таким образом, должна позволять выбрать метрику и критерий (или несколько) для каждого теста.
    \subsubsection{Ранняя остановка теста}
    \par Классическая процедура A/B тестирования не позволяет останавливать тест, пока не достигнут целевой размер выборок. Однако, существуют методики, такие, как последовательное A/B тестирование\cite{miller_simple_nodate} и баесовское A/B тестирование\cite{miller_formulas_nodate}, которые дают возможность так делать. Это позволяет тратить меньше ресурсов на тесты.
    \subsubsection{Проведение нескольких тестов}
    Проведение нескольких тестов подряд или одновременно представляет проблему, так как пользователи обладают памятью, и их реакция на различные комбинации может отличаться, возникает зависимость.
    \subsection{План работ}
    На данный момент ведется разработка MVP системы, который будет регулярно выполнять заданные аналитиком запросы и записывать значения метрик и статистических критериев в базу. Это поможет уточнить и актуализировать требования к системе.
\end{document}